{% extends "base.html" %} {% load static %} {% block content %}

{% load crispy_forms_tags %}

<section id="book-detail">
  <div class="book-container conatiner-fluid">
    <div class="row">
      <div class="col-4 col-md-2">
        {% if "placeholder" in book.book_image.url %}
        <img
          class="card-img-top book-detail-image"
          src="https://codeinstitute.s3.amazonaws.com/fullstack/blog/default.jpg"
        />
        {% else %}
        <img
          class="card-img-top book-detail-image"
          src=" {{ book.book_image.url }}"
        />
        {% endif %}
      </div>
      <div class="col-8 col-md-10">
        <div class="row">
          <div class="col-12">
            <h1 class="book-title">{{ book.title }}</h1>
          </div>
          <div class="col-12">
            <h2 class="book-subtitle">by {{ book.book_author }}</h2>
          </div>
          <div class="row">
            <div class="col-6 col-sm-4 col-md-2">
              <button type="button" class="btn btn-styles">Review</button>
            </div>
            <div class="col-6 col-sm-8 col-md-10">Rating stars</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="excerpt">
    <h3>Blurb</h3>
    <p>{{ book.book_blurb }}</p>
  </div>
</section>

<!--Reviews section of Book page-->
<section id="reviews">
  {% if reviewed %}

  <div class="alert alert-success">
    Your review is awaiting approval
  </div>

  {% else %}


  {% if user.is_authenticated %}
  <div>
    <h3>Leave a Review</h3>
    <p>Posting as: {{ user.username }}</p>
    <form method="post" style="margin-top : 1.3em;">
      {{ review_form | crispy }}
      {% csrf_token %}
      <button type="submit" class="btn btn-styles">Review</button>
    </form>
  </div>
  {% endif %}
  {% endif %}
  <div class="reviews-container">
    <h3>Reviews</h3>
  </div>
</section>

{% endblock %}
